import{p as P,r as u,q as y,h as Z,i as d,l,b as t,s as h,w as c,v as g,u as s,j as v,y as w,n as B,o as T}from"./index-CJ3q1JqJ.js";import{_ as F}from"./AdminLayout-C24uwuk1.js";import{_ as L}from"./common-BC0Yipj8.js";import{_}from"./ComponentCardOrder.vue_vue_type_script_setup_true_lang-BMJk9k7N.js";import{s as $,a as n}from"./index-BK6avQhT.js";import{C as k}from"./component-CQdj2KLS.js";import{k as C}from"./ko-uxAFNFCj.js";import{a as V}from"./index-ngrFHoWO.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"space-y-5 sm:space-y-6"},N={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},R={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300"},z={class:"relative w-45"},Y={class:"relative w-45"},G={class:"w-1/4"},W={class:"flex items-center gap-3"},J={class:"flex items-center text-sm text-gray-800 whitespace-nowrap"},O={class:"flex items-center text-sm text-gray-800 whitespace-nowrap"},Q={class:"space-y-5 sm:space-y-6 mt-2"},X={ref:"tableWrapper",class:"order-table-wrapper h-120"},ee=["onUpdate:modelValue"],te="dark:bg-dark-900 h-8 w-full rounded-lg border border-gray-300 bg-transparent pl-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",ae=P({__name:"EpInstoreManage",setup(re){const i=u([]),p=u([]),r=u({insp_name:"",prod_name:"",ep_start_date:"",ep_end_date:"",Is:"",Pass:""}),H=u("완제품입고관리"),I=y(()=>({dateFormat:"Y-m-d",altInput:!1,wrap:!0,maxDate:r.value.ep_end_date,locale:C.Korean})),M=y(()=>({dateFormat:"Y-m-d",altInput:!1,wrap:!0,minDate:r.value.ep_start_date,locale:C.Korean})),f=()=>{console.log(r.value),b()},b=async(o=!0)=>{try{const a=(await V.get("/api/viewEpIsManage",{params:r.value})).data;if(a.length===0){alert("조회 결과가 없습니다."),p.value=[];return}i.value=[],p.value=a,console.log("조회버튼 누르고 나오는 products.value 값:",p.value),o&&alert("조회성공!")}catch(e){console.error("getEpIsManage 오류:",e)}},j=()=>{r.value.prod_name="",r.value.ep_start_date="",r.value.ep_end_date="",r.value.Is="",r.value.Pass=""},S=async()=>{const o=i.value.map(e=>({insp_id:e.insp_id,prod_code:e.prod_code,pass_qty:e.pass_qty,epep_dt:e.epep_dt,remark:e.remark||""}));console.log(o);try{if(i.value.length===0){alert("입고할 제품을 선택해주세요");return}const a=(await V.post("/api/insertEpIs",o)).data;if(!a.isSuccessed){alert("입고가 이루어지지 않았습니다. 데이터를 확인해보세요.");return}if(a.isSuccessed){alert("입고성공"),b(!1),x();return}}catch(e){console.error("추가 중 오류 발생",e),alert("서버 요청 중 오류가 발생했습니다.")}},m=u(!1),U=o=>!o.comncode_dtnm||o.comncode_dtnm.trim()==="",E=o=>o.comncode_dtnm&&o.comncode_dtnm.trim()!==""?"disabled-row":"",q=o=>{m.value=o.checked,o.checked?i.value=p.value.filter(U):i.value=[]},x=()=>{m.value=!1};return(o,e)=>(T(),Z(F,null,{default:d(()=>[l(L,{pageTitle:H.value},null,8,["pageTitle"]),t("div",K,[t("form",{onSubmit:h(f,["prevent"]),action:""},[l(_,{title:"완제품 입고 관리 검색"},{"header-right":d(()=>[t("div",{class:""},[t("button",{type:"button",class:"btn-white btn-common",onClick:j}," 초기화 "),t("button",{type:"button",class:"btn-color btn-common",onClick:f}," 조회 ")])]),"body-content":d(()=>[t("div",N,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-2"}," 검사명 ",-1)),c(t("input",{type:"text",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",placeholder:"검사이름을 입력해주세요","onUpdate:modelValue":e[0]||(e[0]=a=>r.value.insp_name=a),required:""},null,512),[[g,r.value.insp_name]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-400 mb-2"}," 제품명 ",-1)),c(t("input",{type:"text",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",placeholder:"제품이름을 입력해주세요","onUpdate:modelValue":e[1]||(e[1]=a=>r.value.prod_name=a),required:""},null,512),[[g,r.value.prod_name]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," 유통기한 ",-1)),t("div",R,[t("div",z,[l(s(k),{modelValue:r.value.ep_start_date,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.ep_start_date=a),config:I.value,class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 pl-4 pr-11 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",placeholder:"시작일"},null,8,["modelValue","config"]),e[9]||(e[9]=t("span",{class:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400"},[t("svg",{class:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.66659 1.5415C7.0808 1.5415 7.41658 1.87729 7.41658 2.2915V2.99984H12.5833V2.2915C12.5833 1.87729 12.919 1.5415 13.3333 1.5415C13.7475 1.5415 14.0833 1.87729 14.0833 2.2915V2.99984L15.4166 2.99984C16.5212 2.99984 17.4166 3.89527 17.4166 4.99984V7.49984V15.8332C17.4166 16.9377 16.5212 17.8332 15.4166 17.8332H4.58325C3.47868 17.8332 2.58325 16.9377 2.58325 15.8332V7.49984V4.99984C2.58325 3.89527 3.47868 2.99984 4.58325 2.99984L5.91659 2.99984V2.2915C5.91659 1.87729 6.25237 1.5415 6.66659 1.5415ZM6.66659 4.49984H4.58325C4.30711 4.49984 4.08325 4.7237 4.08325 4.99984V6.74984H15.9166V4.99984C15.9166 4.7237 15.6927 4.49984 15.4166 4.49984H13.3333H6.66659ZM15.9166 8.24984H4.08325V15.8332C4.08325 16.1093 4.30711 16.3332 4.58325 16.3332H15.4166C15.6927 16.3332 15.9166 16.1093 15.9166 15.8332V8.24984Z",fill:""})])],-1))]),e[11]||(e[11]=t("span",null,"ㅡ",-1)),t("div",Y,[l(s(k),{modelValue:r.value.ep_end_date,"onUpdate:modelValue":e[3]||(e[3]=a=>r.value.ep_end_date=a),config:M.value,class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 pl-4 pr-11 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",placeholder:"종료일"},null,8,["modelValue","config"]),e[10]||(e[10]=t("span",{class:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400"},[t("svg",{class:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.66659 1.5415C7.0808 1.5415 7.41658 1.87729 7.41658 2.2915V2.99984H12.5833V2.2915C12.5833 1.87729 12.919 1.5415 13.3333 1.5415C13.7475 1.5415 14.0833 1.87729 14.0833 2.2915V2.99984L15.4166 2.99984C16.5212 2.99984 17.4166 3.89527 17.4166 4.99984V7.49984V15.8332C17.4166 16.9377 16.5212 17.8332 15.4166 17.8332H4.58325C3.47868 17.8332 2.58325 16.9377 2.58325 15.8332V7.49984V4.99984C2.58325 3.89527 3.47868 2.99984 4.58325 2.99984L5.91659 2.99984V2.2915C5.91659 1.87729 6.25237 1.5415 6.66659 1.5415ZM6.66659 4.49984H4.58325C4.30711 4.49984 4.08325 4.7237 4.08325 4.99984V6.74984H15.9166V4.99984C15.9166 4.7237 15.6927 4.49984 15.4166 4.49984H13.3333H6.66659ZM15.9166 8.24984H4.08325V15.8332C4.08325 16.1093 4.30711 16.3332 4.58325 16.3332H15.4166C15.6927 16.3332 15.9166 16.1093 15.9166 15.8332V8.24984Z",fill:""})])],-1))])])]),t("div",G,[e[15]||(e[15]=t("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-400 mb-1"}," 입고상태 ",-1)),t("div",W,[t("label",J,[c(t("input",{type:"checkbox","true-value":"입고완료","false-value":"","onUpdate:modelValue":e[4]||(e[4]=a=>r.value.Is=a),class:"mr-1"},null,512),[[w,r.value.Is]]),e[13]||(e[13]=v("입고완료 ",-1))]),t("label",O,[c(t("input",{type:"checkbox","true-value":"검사완료","false-value":"","onUpdate:modelValue":e[5]||(e[5]=a=>r.value.Pass=a),class:"mr-1"},null,512),[[w,r.value.Pass]]),e[14]||(e[14]=v("검사완료 ",-1))])])])])]),_:1})],32)]),t("form",{action:"",id:"submitEpIs",onSubmit:h(S,["prevent"])},[t("div",Q,[l(_,{title:"완제품 입고 관리"},{"header-right":d(()=>[...e[16]||(e[16]=[t("div",{class:"flex items-center"},[t("button",{type:"submit",class:"btn-color btn-common"},"입고")],-1)])]),"body-content":d(()=>[t("div",X,[l(s($),{selection:i.value,"onUpdate:selection":e[6]||(e[6]=a=>i.value=a),value:p.value,dataKey:"insp_id",tableStyle:"max-width: 100%;",selectionMode:"multiple",rowClass:E,"select-all":m.value,onSelectAllChange:q,onRowUnselect:x,showGridlines:"",scrollable:"",scrollHeight:"480px",size:"small",class:"text-sm"},{empty:d(()=>[...e[17]||(e[17]=[t("div",{class:"text-center"},"조회를 먼저해주세요!",-1)])]),default:d(()=>[l(s(n),{selectionMode:"multiple",headerStyle:"width: 1%",field:"insp_id"}),l(s(n),{field:"insp_id",header:"검사ID",pt:{columnHeaderContent:"justify-center"},style:{"min-width":"150px"}}),l(s(n),{field:"insp_name",header:"검사명",pt:{columnHeaderContent:"justify-center"},style:{"min-width":"250px"}}),l(s(n),{field:"prod_code",header:"제품코드",pt:{columnHeaderContent:"justify-center"},style:{"min-width":"200px"}}),l(s(n),{field:"prod_name",header:"제품명",pt:{columnHeaderContent:"justify-center"},style:{"min-width":"200px"}}),l(s(n),{field:"prod_spec",header:"규격",pt:{columnHeaderContent:"justify-center"},style:{"min-width":"50px","text-align":"left"}}),l(s(n),{field:"prod_unit",header:"단위",pt:{columnHeaderContent:"justify-center"},style:{"min-width":"80px"}}),l(s(n),{field:"pass_qty",header:"수량",style:{"min-width":"80px","text-align":"right"},pt:{columnHeaderContent:"justify-center"}}),l(s(n),{field:"epep_dt",header:"유통기한",pt:{columnHeaderContent:"justify-center"},style:{"min-width":"100px","text-align":"center"}}),l(s(n),{field:"ep_lot",header:"제품lot번호",pt:{columnHeaderContent:"justify-center"},style:{"min-width":"200px"}}),l(s(n),{field:"comncode_dtnm",header:"입고상태",pt:{columnHeaderContent:"justify-center"},style:{"min-width":"100px"}}),l(s(n),{field:"remark",header:"비고",pt:{columnHeaderContent:"justify-center"},style:{"min-width":"150px"}},{body:d(({data:a})=>[c(t("input",{"onUpdate:modelValue":D=>a.remark=D,type:"text",class:B(te)},null,8,ee),[[g,a.remark]])]),_:1})]),_:1},8,["selection","value","select-all"])],512)]),_:1})])],32)]),_:1}))}}),me=A(ae,[["__scopeId","data-v-a8507956"]]);export{me as default};
