import{p as D,r as c,B as L,c as g,d as N,b as e,s as R,l,i as y,w as h,n,v as S,D as $,F as E,g as G,t as I,u as d,o as _}from"./index-CJ3q1JqJ.js";import"./common-BC0Yipj8.js";import{_ as T}from"./Modal.vue_vue_type_script_setup_true_lang-By9v9QUL.js";import{s as q,a as i}from"./index-BK6avQhT.js";import{a as P}from"./index-ngrFHoWO.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={key:0},O={class:"modal-container flex gap-2 mb-2"},Q={class:"w-1/3"},W={class:"w-1/3"},X={class:"w-1/3"},Y={class:"relative z-20 bg-transparent"},Z=["value"],ee={class:"modal-container"},V="dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-950 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",w="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400",te="dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 pr-11 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-950 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",oe=D({__name:"ProductSelectmodal",props:{disabledProdCodes:{},visible:{type:Boolean}},emits:["close","selectedProductValue"],setup(U,{emit:j}){const u=U,p=j,k=()=>{x(),v(),p("close")},m=c([]),a=c({prod_name:"",prod_spec:"",prod_unit:""}),H=async()=>{try{const t=await P.get("/api/productsView",{params:a.value});t.data.length===0&&(alert("조회 결과가 없습니다."),b()),m.value=t.data}catch(t){console.error("조회 중 오류 발생",t)}},b=()=>{a.value.prod_name="",a.value.prod_spec="",a.value.prod_unit=""},r=c([]),x=()=>{r.value=[]};function B(){r.value&&(p("selectedProductValue",r.value),x(),b(),v(),p("close"))}const C=c([]),M=async()=>{try{const t=await P.get("/api/viewProdUnit");C.value=t.data}catch(t){console.error(t)}};L(()=>u.visible,async t=>{t&&await M()});const f=c(!1),z=t=>!u.disabledProdCodes.includes(t.prod_code),F=t=>u.disabledProdCodes.includes(t.prod_code)?"disabled-row":"",A=t=>{f.value=t.checked,t.checked?r.value=m.value.filter(z):r.value=[]},v=()=>{f.value=!1};return(t,o)=>u.visible?(_(),g("div",K,[e("form",{onSubmit:R(H,["prevent"]),action:""},[l(T,{title:"제품선택",fullScreenBackdrop:!0,onClose:k,"title-align":"left","header-align":"right"},{"modal-header":y(()=>[e("div",{class:"flex justify-end"},[e("button",{type:"button",class:"btn-common-modal btn-white",onClick:b}," 초기화 "),o[4]||(o[4]=e("button",{type:"submit",class:"btn-common-modal btn-color"},"조회",-1))])]),"modal-body":y(()=>[e("div",O,[e("div",Q,[e("label",{class:n(w),for:"insp-name"}," 제품명 "),h(e("input",{type:"text",id:"bcnc_name",class:n(V),"onUpdate:modelValue":o[0]||(o[0]=s=>a.value.prod_name=s)},null,512),[[S,a.value.prod_name]])]),e("div",W,[e("label",{class:n(w),for:"insp-name"}," 규격 "),h(e("input",{type:"text",id:"pic",class:n(V),"onUpdate:modelValue":o[1]||(o[1]=s=>a.value.prod_spec=s)},null,512),[[S,a.value.prod_spec]])]),e("div",X,[e("label",{class:n(w),for:"insp-name"}," 단위 "),e("div",Y,[h(e("select",{id:"insp-type",class:n(te),"onUpdate:modelValue":o[2]||(o[2]=s=>a.value.prod_unit=s)},[o[5]||(o[5]=e("option",{value:""},null,-1)),(_(!0),g(E,null,G(C.value,s=>(_(),g("option",{key:s.comncode_dtnm,value:s.comncode_dtnm},I(s.comncode_dtnm),9,Z))),128))],512),[[$,a.value.prod_unit]]),o[6]||(o[6]=e("span",{class:"absolute z-30 text-gray-500 -translate-y-1/2 pointer-events-none right-4 top-1/2 dark:text-gray-400"},[e("svg",{class:"stroke-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M4.79175 7.396L10.0001 12.6043L15.2084 7.396",stroke:"","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))])])]),e("div",ee,[l(d(q),{selection:r.value,"onUpdate:selection":o[3]||(o[3]=s=>r.value=s),datakey:"prod_code",value:m.value,showGridlines:"",scrollable:"",size:"small",class:"text-sm z-[100001]",paginator:"",rows:8,rowClass:F,"select-all":f.value,onSelectAllChange:A,onRowUnselect:v},{default:y(()=>[l(d(i),{header:"",pt:{columnHeaderContent:"justify-center"},selectionMode:"multiple",style:{width:"10px"}}),l(d(i),{field:"prod_code",header:"제품코드",pt:{columnHeaderContent:"justify-center"}}),l(d(i),{field:"prod_name",header:"제품명",pt:{columnHeaderContent:"justify-center"}}),l(d(i),{field:"prod_spec",header:"규격",pt:{columnHeaderContent:"justify-center"},style:{"text-align":"right"}}),l(d(i),{field:"prod_unit",header:"단위",pt:{columnHeaderContent:"justify-center"}})]),_:1},8,["selection","value","select-all"])]),e("div",{class:"flex justify-center mt-3"},[e("button",{type:"button",class:"btn-common btn-white",onClick:B}," 확인 "),e("button",{class:"btn-common btn-color",onClick:k},"취소")])]),_:1})],32)])):N("",!0)}}),ce=J(oe,[["__scopeId","data-v-cb2a4178"]]);export{ce as P};
