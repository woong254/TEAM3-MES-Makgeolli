import{p as me,r as m,B as P,c as I,d as _e,l as a,i as u,b as s,u as r,o as N,j as Y,t as $,I as ce,q as ue,h as xe,w as v,n as i,v as y,g as he,F as pe,J as Qe,K as we}from"./index-CJ3q1JqJ.js";import{_ as Je}from"./common-BC0Yipj8.js";import{_ as ke}from"./ComponentCardButton.vue_vue_type_script_setup_true_lang-BzeZFBPb.js";import{_ as We}from"./AdminLayout-C24uwuk1.js";import{s as A,a as d,b as Ce}from"./index-BK6avQhT.js";/* empty css                   */import{C as Ve}from"./component-CQdj2KLS.js";import{_ as je}from"./Modal.vue_vue_type_script_setup_true_lang-By9v9QUL.js";import{a as R}from"./index-ngrFHoWO.js";import{k as Se}from"./ko-uxAFNFCj.js";import{I as Xe,a as et}from"./MatInspRubricModal-BlrG3mKp.js";import{_ as He}from"./_plugin-vue_export-helper-DlAUqK2U.js";const tt={key:0},st={class:"modal-container"},nt=me({__name:"ProcInspTargetSelectModal",props:{visible:{type:Boolean}},emits:["close","checked"],setup(K,{emit:E}){const S=K,l=E,D=()=>{l("close")},_=m([]),w=m([]),M=async()=>{try{const{data:x}=await R.get("/api/procInspTargetSearch");if(!Array.isArray(x)){_.value=[],w.value=[];return}const p=x.map(V=>({procs_no:Number(V.procs_no),prod_code:V.prod_code||"",prod_name:V.prod_name||"",prod_spec:V.prod_spec||"",comncode_dtnm:V.comncode_dtnm||"",mk_qty:Number(V.mk_qty||0),procs_endtm:b(V.procs_endtm),now_procs:V.now_procs||""}));_.value=p,w.value=p,console.log("조회결과:",p)}catch(x){console.error("데이터 조회 오류:",x),_.value=[],w.value=[]}};P(()=>S.visible,async x=>{x&&await M()});const k=m(null),f=()=>{l("checked",k.value),l("close")};function b(x){if(!x)return"";const p=new Date(x),V=p.getFullYear(),U=String(p.getMonth()+1).padStart(2,"0"),Q=String(p.getDate()).padStart(2,"0"),J=String(p.getHours()).padStart(2,"0"),W=String(p.getMinutes()).padStart(2,"0"),X=String(p.getSeconds()).padStart(2,"0");return`${V}-${U}-${Q} ${J}:${W}:${X}`}return(x,p)=>S.visible?(N(),I("div",tt,[a(je,{title:"검사대상",fullScreenBackdrop:!0,"title-align":"left","header-align":"right",width:"1000px",onClose:D},{"modal-body":u(()=>[s("div",st,[a(r(A),{value:w.value,selection:k.value,"onUpdate:selection":p[0]||(p[0]=V=>k.value=V),dataKey:"procs_no",showGridlines:"",scrollable:"",size:"small",class:"text-sm z-[100001]",paginator:"",rows:8},{empty:u(()=>[...p[1]||(p[1]=[s("div",{class:"text-center"},"검색 결과가 없습니다.",-1)])]),default:u(()=>[a(r(d),{header:"",pt:{columnHeaderContent:"justify-center"},selectionMode:"single",showSelectAll:!1,style:{width:"10px"}}),a(r(d),{field:"procs_no",header:"공정실적번호",pt:{columnHeaderContent:"justify-center"},style:{"text-align":"center",width:"100px"}}),a(r(d),{field:"now_procs",header:"공정명",pt:{columnHeaderContent:"justify-center"}}),a(r(d),{field:"prod_code",header:"제품코드",pt:{columnHeaderContent:"justify-center"}}),a(r(d),{field:"prod_name",header:"제품명",pt:{columnHeaderContent:"justify-center"},style:{width:"250px"}}),a(r(d),{field:"procs_endtm",header:"작업종료일시",pt:{columnHeaderContent:"justify-center"}}),a(r(d),{field:"mk_qty",header:"생산량",pt:{columnHeaderContent:"justify-center"},style:{"text-align":"right"}}),a(r(d),{field:"prod_spec",header:"규격",pt:{columnHeaderContent:"justify-center"}}),a(r(d),{field:"comncode_dtnm",header:"단위",pt:{columnHeaderContent:"justify-center"}})]),_:1},8,["value","selection"])]),s("div",{class:"flex justify-center mt-3"},[s("button",{class:"btn-common btn-white",onClick:f},"확인")])]),_:1})])):_e("",!0)}}),at={key:0},lt={class:"modal-container"},ot=me({__name:"procInspSearchModal",props:{visible:{type:Boolean},rows:{}},emits:["close","checked"],setup(K,{emit:E}){const S=K,l=E,D=()=>{l("close")},_=m(null),w=()=>{_.value&&l("checked",_.value),l("close")};function M(k){const f=k instanceof Date?k:new Date(k),b=f.getFullYear(),x=String(f.getMonth()+1).padStart(2,"0"),p=String(f.getDate()).padStart(2,"0");return`${b}-${x}-${p}`}return P(()=>S.visible,k=>{k&&(_.value=null)}),(k,f)=>S.visible?(N(),I("div",at,[a(je,{title:"조회",fullScreenBackdrop:!0,"title-align":"left","header-align":"right",width:"900px",onClose:D},{"modal-body":u(()=>[s("div",lt,[a(r(A),{value:S.rows,selection:_.value,"onUpdate:selection":f[0]||(f[0]=b=>_.value=b),dataKey:"insp_id",showGridlines:"",scrollable:"",size:"small",class:"text-sm z-[100001]",paginator:"",rows:8},{empty:u(()=>[...f[1]||(f[1]=[s("div",{class:"text-center"},"검색 결과가 없습니다.",-1)])]),default:u(()=>[a(r(d),{header:"",pt:{columnHeaderContent:"justify-center"},selectionMode:"single",showSelectAll:!1,style:{width:"10px"}}),a(r(d),{field:"insp_name",header:"검사명",pt:{columnHeaderContent:"justify-center"}}),a(r(d),{field:"insp_date",header:"검사일시",pt:{columnHeaderContent:"justify-center"}},{body:u(b=>[Y($(M(b.data.insp_date)),1)]),_:1}),a(r(d),{field:"now_procs",header:"공정명",pt:{columnHeaderContent:"justify-center"}}),a(r(d),{field:"prod_name",header:"제품명",pt:{columnHeaderContent:"justify-center"}}),a(r(d),{field:"prod_spec",header:"규격",pt:{columnHeaderContent:"justify-center"}}),a(r(d),{field:"comncode_dtnm",header:"단위",pt:{columnHeaderContent:"justify-center"}}),a(r(d),{field:"insp_qty",header:"검사량",pt:{columnHeaderContent:"justify-center"},style:{"text-align":"right"}})]),_:1},8,["value","selection"])]),s("div",{class:"flex justify-center mt-3"},[s("button",{class:"btn-common btn-white",onClick:w},"확인")])]),_:1})])):_e("",!0)}}),rt=He(ot,[["__scopeId","data-v-b02d88f6"]]),it={class:"flex gap-4"},dt={class:"w-1/4"},ct={class:"flex items-center gap-2"},ut={class:"relative"},pt={class:"relative"},mt={class:"flex justify-end"},_t={class:"h-[420px] overflow-auto"},ft={class:"rounded-lg border border-gray-200 shadow-sm p-4 mb-2"},vt={class:"w-full flex items-center mb-2"},yt={class:"flex flex-wrap justify-between gap-2"},bt={class:"w-1/5 flex items-center relative"},gt={class:"w-1/5 flex items-center relative"},xt={class:"w-1/5 flex items-center relative"},ht={class:"w-1/5 flex items-center relative"},wt={class:"w-1/5 flex items-center relative"},kt={class:"w-1/5 flex items-center relative"},Ct={class:"w-1/5 flex items-center relative"},Vt={class:"w-1/5 flex items-center"},St={class:"w-1/5 flex items-center"},jt={class:"rounded-lg border border-gray-200 p-4 shadow-sm mb-2"},Ht={class:"flex flex-wrap mb-2"},$t={class:"w-1/4 flex items-center"},Mt={class:"text-sm w-[100px] ml-2"},Nt={class:"w-1/4 flex items-center"},Dt={class:"text-sm w-[100px] ml-2"},It={class:"w-1/4 flex items-center"},qt={class:"text-sm w-[100px] ml-2"},Ut={class:"flex flex-wrap mb-2"},Ft=["onUpdate:modelValue"],Tt={class:"text-sm w-[100px] ml-2"},Rt={key:0},Ot={key:0},Bt={key:1},Et={class:"text-sm",style:{color:"#999"}},Lt={class:"w-full flex"},zt={class:"rounded-lg border border-gray-200 p-4 shadow-sm"},At={class:"w-[30%] flex justify-center items-center m-1.5 rounded-md float-right",style:{border:"1px solid #ccc",padding:"4px"}},Kt={class:"text-2xl font-bold"},Zt={class:"flex justify-center"},Gt={class:"flex gap-2 w-full items-center"},Yt=["onUpdate:modelValue"],Pt={class:"w-[100px]"},Qt=["onUpdate:modelValue"],Jt={class:"w-[100px]"},Wt=["onUpdate:modelValue","onInput"],Xt={class:"flex justify-center"},es={class:"p-4"},ts={class:"flex justify-center"},ss=["name","value","onUpdate:modelValue","onChange"],ns="dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-950 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",z="dark:bg-dark-900 h-7 w-full rounded-sm border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-950 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",T="dark:bg-dark-900 h-7 w-full rounded-sm border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-950 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",B="dark:bg-dark-900 h-7 w-full rounded-sm border border-gray-300 bg-gray-100 px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30",C="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400",as=me({__name:"ProcInspManage",setup(K){const E=m("공정검사 관리"),S=m("이한솔"),l=ce({procs_no:0,prod_code:"",prod_name:"",prod_spec:"",comncode_dtnm:"",mk_qty:0,procs_endtm:"",now_procs:""}),D=m(""),_=m(0),w=m(0),M=m(0),k=m(""),f=m([]),b=m([]),x=m("create"),p=m(null),V=async n=>{l.procs_no=n.procs_no,l.prod_code=n.prod_code,l.prod_name=n.prod_name,l.prod_spec=n.prod_spec,l.comncode_dtnm=n.comncode_dtnm,l.mk_qty=n.mk_qty,l.now_procs=n.now_procs,Z.value=!1,await Ue(n.prod_code),_.value=0,w.value=0,M.value=0,p.value=null,x.value="create"},U=new Date,Q=U.getFullYear(),J=String(U.getMonth()+1).padStart(2,"0"),W=String(U.getDate()).padStart(2,"0"),X=String(U.getHours()).padStart(2,"0"),$e=String(U.getMinutes()).padStart(2,"0"),Me=String(U.getSeconds()).padStart(2,"0"),ee=`${Q}-${J}-${W} ${X}:${$e}:${Me}`,te=m(null),Z=m(!1),j=()=>{Z.value=!0},Ne=()=>{Z.value=!1},De=ue(()=>({dateFormat:"Y-m-d",altInput:!1,wrap:!0,maxDate:h.end_date||"today",locale:Se.Korean})),Ie=ue(()=>({dateFormat:"Y-m-d",altInput:!1,wrap:!0,minDate:h.start_date||void 0,maxDate:"today",locale:Se.Korean})),qe=()=>{_.value>l.mk_qty&&(alert("검사량은 생산량을 초과할 수 없습니다."),_.value=l.mk_qty)};P([_,w],()=>{M.value=_.value-w.value});const q=ce({});P(()=>Object.values(q),n=>{const e=n.reduce((t,o)=>t+(o||0),0);w.value=e});const O=m([]),se=m([]),fe=n=>{try{return n?JSON.parse(n):[]}catch{return[]}},Ue=async n=>{try{const{data:e}=await R.get(`/api/prodInspQcMasternNg/${n}`);if(!(e!=null&&e.ok))throw new Error("조회 실패");O.value=e.ng??[],se.value=(e.qc??[]).map(t=>({...t,sens_questions:fe(t.sens_questions),score_desc:fe(t.score_desc)})),Re(),console.log("불량 및 품질기준관리 조회결과:",e)}catch(e){console.error("데이터 조회 오류:",e),O.value=[],se.value=[],b.value=[],f.value=[]}},L=n=>{switch((n||"").toLowerCase()){case"r1":return"이상";case"r2":return"초과";case"r3":return"이하";case"r4":return"미만";default:return""}},ne=n=>n==null||n===""?null:Number(n),ve=n=>Array.isArray(n)?n:n?JSON.parse(n):[],Fe=n=>{const e=ne(n.insp_result_value);if(e===null){n.r_value="";return}const t=ne(n.min_range),o=ne(n.max_range);let g=!0;t!==null&&(g=n.min_label==="이상"?e>=t:n.min_label==="초과"?e>t:!0);let H=!0;o!==null&&(H=n.max_label==="이하"?e<=o:n.max_label==="미만"?e<o:!0),n.r_value=g&&H?"P":"F"},Te=n=>{const e=n.details.map(F=>F.score).filter(F=>typeof F=="number");if(!e.length){n.insp_result_value=0,n.r_value="";return}const t=e.reduce((F,c)=>F+c,0)/e.length,o=n.pass_score,H=(n.pass_score_spec||"r1").toLowerCase()==="r2"?t>o:t>=o;n.insp_result_value=Number(t.toFixed(2)),n.r_value=H?"P":"F"},Re=()=>{const n=[],e=[];(se.value||[]).forEach(t=>{if(t.insp_type==="R")n.push({insp_item_id:t.insp_item_id,insp_item_name:t.insp_item_name,min_range:t.min_range??"",min_label:L(t.min_range_spec),max_range:t.max_range??"",max_label:L(t.max_range_spec),unit:t.unit??"",insp_method:t.insp_method??null,file_name:t.file_name??null,insp_result_value:0,r_value:""});else if(t.insp_type==="S"){const o=ve(t.sens_questions).map((g,H)=>({id:`${t.insp_item_id}-${g.order??H+1}`,order:g.order??H+1,question_name:g.name??g.question??g.question_name??"",score:void 0}));e.push({insp_item_id:t.insp_item_id,insp_item_name:t.insp_item_name,pass_score:Number(t.pass_score??0),pass_score_spec:(t.pass_score_spec??"").toLowerCase(),score_desc:ve(t.score_desc),max_score:Number(t.max_score??5),insp_result_value:0,r_value:"",details:o})}}),f.value=n,b.value=e},ye=ue(()=>{const n=f.value.every(t=>t.r_value==="P"),e=b.value.every(t=>t.r_value==="P");return f.value.length===0&&b.value.length===0?"":n&&e?"합격":"불합격"}),ae=m(!1),le=m(null),Oe=async n=>{le.value=(n==null?void 0:n.insp_method)??null,await we(),ae.value=!0},Be=()=>{ae.value=!1,le.value=null},oe=m(!1),re=m(null),Ee=n=>{re.value=n.score_desc,oe.value=!0},Le=()=>{oe.value=!1,re.value=null},be=()=>{const n=ye.value==="합격"?"P":"F",e=[];for(const o of f.value)e.push({insp_result_value:Number(o.insp_result_value??0),r_value:o.r_value||"",insp_item_id:o.insp_item_id});for(const o of b.value)e.push({insp_result_value:Number(o.insp_result_value??0),r_value:o.r_value||"",insp_item_id:o.insp_item_id});const t=Object.entries(q).filter(([,o])=>Number(o)>0).map(([o,g])=>({def_item_id:o,qty:Number(g)}));return{insp_name:D.value,insp_date:ee,insp_qty:Number(_.value||0),pass_qty:Number(M.value||0),fail_qty:Number(w.value||0),remark:k.value||"",final_result:n,emp_id:S.value||"EMP-20250616-0004",procs_no:Number(l.procs_no),results:e,ngs:t}},ze=n=>n!=null&&n!==""&&!Number.isNaN(Number(n)),ge=()=>{var n;if(!((n=D.value)!=null&&n.trim()))return alert("검사명을 입력해주세요."),!1;if(!l.prod_name)return alert("검사할 완제품을 선택해주세요."),!1;if(!_.value||_.value<=0)return alert("검사량을 입력해주세요."),!1;if(_.value>l.mk_qty)return alert("검사량은 생산량을 초과할 수 없습니다."),!1;if(M.value<0)return alert("합격량은 0보다 작을 수 없습니다."),!1;if(f.value.length>0){const e=f.value.filter(t=>!ze(t.insp_result_value));if(e.length>0){const t=e[0];return alert(`범위 검사 '${t.insp_item_name}'에 측정값을 입력해주세요.`),!1}}if(b.value.length>0)for(const e of b.value){if(!e.details||e.details.length===0)continue;const t=e.details.find(o=>typeof o.score!="number");if(t)return alert(`관능 검사 '${e.insp_item_name}'의 '${t.order}. ${t.question_name}' 점수를 선택해주세요.`),!1}return!0},Ae=async()=>{try{if(!ge())return;const n=be(),{data:e}=await R.post("/api/procInsp",n);e!=null&&e.ok?(alert(`등록되었습니다.
검사ID: ${e.insp_id??""}`),ie()):alert((e==null?void 0:e.message)||"등록 실패")}catch(n){console.error("[FE] 등록 오류:",n),alert("서버 오류가 발생했습니다.")}},Ke=async()=>{try{if(!ge())return;const n=be(),{data:e}=await R.put(`/api/prodInsp/${p.value}`,n);e!=null&&e.ok?alert(`수정되었습니다.
검사ID: ${p.value}`):alert((e==null?void 0:e.message)||"수정 실패")}catch(n){console.error("[FE] 수정 오류:",n),alert("서버 오류가 발생했습니다.")}},Ze=async()=>{try{if(!p.value)return alert("삭제할 검사ID가 없습니다.");if(!confirm("정말 삭제하시겠습니까?"))return;const{data:n}=await R.delete(`/api/prodInsp/${p.value}`);n!=null&&n.ok?(alert("삭제되었습니다."),ie()):alert((n==null?void 0:n.message)||"삭제 실패")}catch(n){console.error("[FE] 삭제 오류:",n),alert("서버 오류가 발생했습니다.")}},ie=()=>{D.value="",S.value="이한솔",k.value="",Object.assign(l,{procs_no:"",prod_code:"",prod_name:"",prod_spec:"",comncode_dtnm:"",mk_qty:0,now_procs:""}),_.value=0,w.value=0,M.value=0,O.value=[],Object.keys(q).forEach(n=>delete q[n]),f.value=[],b.value=[],te.value=null,p.value=null,x.value="create"},h=ce({insp_name_word:"",start_date:"",end_date:""}),Ge=()=>{h.insp_name_word="",h.start_date="",h.end_date="",de.value=[]},G=m(!1),de=m([]),Ye=async()=>{try{const{data:n}=await R.post("/api/procInspSearch",{insp_name_word:h.insp_name_word||void 0,start_date:h.start_date||void 0,end_date:h.end_date||void 0});de.value=Array.isArray(n)?n:(n==null?void 0:n.data)||[],await we(),console.log("검색기능 : ",n),G.value=!0,h.insp_name_word="",h.start_date="",h.end_date=""}catch(n){alert("검색에 실패했습니다."),console.error(n)}};async function Pe(n){G.value=!1,await R.get(`/api/procInspDetail/${n.insp_id}`).then(({data:e})=>{if(!(e!=null&&e.ok)){alert((e==null?void 0:e.message)||"상세 조회 실패");return}const{header:t,results:o,ngs:g}=e;D.value=t.insp_name||"",S.value=t.emp_id||S.value,_.value=Number(t.insp_qty||0),w.value=Number(t.fail_qty||0),M.value=Number(t.pass_qty||0),k.value=t.remark||"",l.procs_no=t.procs_no||"",l.prod_code=t.prod_code||"",l.prod_name=t.prod_name||"",l.prod_spec=t.prod_spec||"",l.comncode_dtnm=t.prod_unit_name||"",l.mk_qty=Number(t.mk_qty||0),l.procs_endtm=t.procs_endtm||"",l.now_procs=t.now_procs||"";const H=[],F=[];for(const c of o||[])c.insp_type==="R"?H.push({insp_item_id:c.insp_item_id,insp_item_name:c.insp_item_name,min_range:c.min_range??"",min_label:L(c.min_range_spec),max_range:c.max_range??"",max_label:L(c.max_range_spec),unit:c.unit??"",insp_method:c.insp_method??null,file_name:c.file_name??null,insp_result_value:Number(c.insp_result_value??0),r_value:c.r_value||""}):c.insp_type==="S"&&F.push({insp_item_id:c.insp_item_id,insp_item_name:c.insp_item_name,pass_score:Number(c.pass_score??0),pass_score_spec:(c.pass_score_spec??"").toLowerCase(),score_desc:[],max_score:Number(c.max_score??5),insp_result_value:Number(c.insp_result_value??0),r_value:c.r_value||"",details:[]});f.value=H,b.value=F,O.value=(g||[]).map(c=>({def_item_id:c.def_item_id,def_item_name:c.def_item_name})),Object.keys(q).forEach(c=>delete q[c]);for(const c of g||[])q[c.def_item_id]=Number(c.qty||0)}).catch(e=>{console.error(e),alert("상세 조회 중 오류")}),p.value=n.insp_id,x.value="edit"}return(n,e)=>(N(),xe(We,null,{default:u(()=>[a(Je,{pageTitle:E.value},null,8,["pageTitle"]),a(ke,{title:"조회",className:"shadow-sm",class:"mb-2"},{"header-right":u(()=>[s("div",{class:"flex justify-end"},[s("button",{class:"btn-common btn-white",onClick:Ge},"초기화"),s("button",{class:"btn-common btn-color",onClick:Ye},"조회")])]),"body-content":u(()=>[s("div",it,[s("div",dt,[s("label",{class:i(C)}," 검사명 "),v(s("input",{type:"text",class:i(ns),"onUpdate:modelValue":e[0]||(e[0]=t=>h.insp_name_word=t)},null,512),[[y,h.insp_name_word]])]),s("div",null,[e[22]||(e[22]=s("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," 검사일시 ",-1)),s("div",ct,[s("div",ut,[a(r(Ve),{modelValue:h.start_date,"onUpdate:modelValue":e[1]||(e[1]=t=>h.start_date=t),config:De.value,class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 pl-4 pr-11 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",placeholder:" "},null,8,["modelValue","config"]),e[19]||(e[19]=s("span",{class:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400"},[s("svg",{class:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.66659 1.5415C7.0808 1.5415 7.41658 1.87729 7.41658 2.2915V2.99984H12.5833V2.2915C12.5833 1.87729 12.919 1.5415 13.3333 1.5415C13.7475 1.5415 14.0833 1.87729 14.0833 2.2915V2.99984L15.4166 2.99984C16.5212 2.99984 17.4166 3.89527 17.4166 4.99984V7.49984V15.8332C17.4166 16.9377 16.5212 17.8332 15.4166 17.8332H4.58325C3.47868 17.8332 2.58325 16.9377 2.58325 15.8332V7.49984V4.99984C2.58325 3.89527 3.47868 2.99984 4.58325 2.99984L5.91659 2.99984V2.2915C5.91659 1.87729 6.25237 1.5415 6.66659 1.5415ZM6.66659 4.49984H4.58325C4.30711 4.49984 4.08325 4.7237 4.08325 4.99984V6.74984H15.9166V4.99984C15.9166 4.7237 15.6927 4.49984 15.4166 4.49984H13.3333H6.66659ZM15.9166 8.24984H4.08325V15.8332C4.08325 16.1093 4.30711 16.3332 4.58325 16.3332H15.4166C15.6927 16.3332 15.9166 16.1093 15.9166 15.8332V8.24984Z",fill:""})])],-1))]),e[21]||(e[21]=s("div",null,"-",-1)),s("div",pt,[a(r(Ve),{modelValue:h.end_date,"onUpdate:modelValue":e[2]||(e[2]=t=>h.end_date=t),config:Ie.value,class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 pl-4 pr-11 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",placeholder:" "},null,8,["modelValue","config"]),e[20]||(e[20]=s("span",{class:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400"},[s("svg",{class:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.66659 1.5415C7.0808 1.5415 7.41658 1.87729 7.41658 2.2915V2.99984H12.5833V2.2915C12.5833 1.87729 12.919 1.5415 13.3333 1.5415C13.7475 1.5415 14.0833 1.87729 14.0833 2.2915V2.99984L15.4166 2.99984C16.5212 2.99984 17.4166 3.89527 17.4166 4.99984V7.49984V15.8332C17.4166 16.9377 16.5212 17.8332 15.4166 17.8332H4.58325C3.47868 17.8332 2.58325 16.9377 2.58325 15.8332V7.49984V4.99984C2.58325 3.89527 3.47868 2.99984 4.58325 2.99984L5.91659 2.99984V2.2915C5.91659 1.87729 6.25237 1.5415 6.66659 1.5415ZM6.66659 4.49984H4.58325C4.30711 4.49984 4.08325 4.7237 4.08325 4.99984V6.74984H15.9166V4.99984C15.9166 4.7237 15.6927 4.49984 15.4166 4.49984H13.3333H6.66659ZM15.9166 8.24984H4.08325V15.8332C4.08325 16.1093 4.30711 16.3332 4.58325 16.3332H15.4166C15.6927 16.3332 15.9166 16.1093 15.9166 15.8332V8.24984Z",fill:""})])],-1))])])])])]),_:1}),a(rt,{visible:G.value,rows:de.value,onClose:e[3]||(e[3]=t=>G.value=!1),onChecked:Pe},null,8,["visible","rows"]),a(ke,{title:"등록",className:"shadow-sm"},{"header-right":u(()=>[s("div",mt,[s("button",{class:"btn-common btn-white",onClick:ie},"초기화"),x.value==="create"?(N(),I("button",{key:0,class:"btn-common btn-color",onClick:Ae},"등록")):(N(),I(pe,{key:1},[e[23]||(e[23]=s("button",{class:"btn-common btn-color"},"PDF",-1)),s("button",{class:"btn-common btn-color",onClick:Ke},"수정"),s("button",{class:"btn-common btn-white",onClick:Ze},"삭제")],64))])]),"body-content":u(()=>[s("div",_t,[s("div",ft,[e[31]||(e[31]=s("h3",{class:"text-md mb-2 font-medium"},"기본정보",-1)),s("div",vt,[s("label",{class:i([C,"w-[86px]"])}," 검사명 "),v(s("input",{type:"text",class:i([z,"w-2/3"]),placeholder:"검사명을 입력하세요.","onUpdate:modelValue":e[4]||(e[4]=t=>D.value=t)},null,512),[[y,D.value]])]),s("div",yt,[s("div",bt,[s("label",{class:i([C,"w-[120px]"])}," 제품코드 "),v(s("input",{type:"text",class:i([T,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:j,"onUpdate:modelValue":e[5]||(e[5]=t=>l.prod_code=t)},null,512),[[y,l.prod_code]]),s("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:j},[...e[24]||(e[24]=[s("i",{class:"pi pi-search"},null,-1)])])]),s("div",gt,[s("label",{class:i([C,"w-[120px]"])}," 제품명 "),v(s("input",{type:"text",class:i([T,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:j,"onUpdate:modelValue":e[6]||(e[6]=t=>l.prod_name=t)},null,512),[[y,l.prod_name]]),s("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:j},[...e[25]||(e[25]=[s("i",{class:"pi pi-search"},null,-1)])])]),s("div",xt,[s("label",{class:i([C,"w-[120px]"])}," 공정실적번호 "),v(s("input",{type:"text",class:i([T,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:j,"onUpdate:modelValue":e[7]||(e[7]=t=>l.procs_no=t)},null,512),[[y,l.procs_no]]),s("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:j},[...e[26]||(e[26]=[s("i",{class:"pi pi-search"},null,-1)])])]),s("div",ht,[s("label",{class:i([C,"w-[120px]"])}," 공정명 "),v(s("input",{type:"text",class:i([T,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:j,"onUpdate:modelValue":e[8]||(e[8]=t=>l.now_procs=t)},null,512),[[y,l.now_procs]]),s("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:j},[...e[27]||(e[27]=[s("i",{class:"pi pi-search"},null,-1)])])]),s("div",wt,[s("label",{class:i([C,"w-[120px]"])}," 규격 "),v(s("input",{type:"text",class:i([T,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"","onUpdate:modelValue":e[9]||(e[9]=t=>l.prod_spec=t)},null,512),[[y,l.prod_spec]]),s("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:j},[...e[28]||(e[28]=[s("i",{class:"pi pi-search"},null,-1)])])]),s("div",kt,[s("label",{class:i([C,"w-[120px]"])}," 단위 "),v(s("input",{type:"text",class:i([T,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:j,"onUpdate:modelValue":e[10]||(e[10]=t=>l.comncode_dtnm=t)},null,512),[[y,l.comncode_dtnm]]),s("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:j},[...e[29]||(e[29]=[s("i",{class:"pi pi-search"},null,-1)])])]),s("div",Ct,[s("label",{class:i([C,"w-[120px]"])}," 생산량 "),v(s("input",{type:"text",class:i([T,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:j,"onUpdate:modelValue":e[11]||(e[11]=t=>l.mk_qty=t),style:{"text-align":"right","padding-right":"40px"}},null,512),[[y,l.mk_qty]]),s("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:j},[...e[30]||(e[30]=[s("i",{class:"pi pi-search"},null,-1)])])]),s("div",Vt,[s("label",{class:i([C,"w-[120px]"])}," 검사자 "),v(s("input",{type:"text",class:i([B,"w-2/3"]),"onUpdate:modelValue":e[12]||(e[12]=t=>S.value=t),disabled:""},null,512),[[y,S.value]])]),s("div",St,[s("label",{class:i([C,"w-[120px]"])}," 검사일시 "),v(s("input",{type:"text",class:i([B,"w-2/3"]),"onUpdate:modelValue":e[13]||(e[13]=t=>ee=t),disabled:""},null,512),[[y,ee]])])]),a(nt,{visible:Z.value,onClose:Ne,onChecked:V},null,8,["visible"])]),s("div",jt,[e[34]||(e[34]=s("h3",{class:"text-md mb-2 font-medium"},"수량입력",-1)),s("div",Ht,[s("div",$t,[s("label",{class:i([C,"w-[120px]"])}," 검사량 "),s("div",null,[v(s("input",{type:"number",class:i([z,"w-2/3"]),placeholder:"검사량을 입력하세요.",style:{"text-align":"right"},"onUpdate:modelValue":e[14]||(e[14]=t=>_.value=t),onInput:qe},null,544),[[y,_.value]])]),s("div",Mt,$(l.comncode_dtnm||"단위"),1)]),s("div",Nt,[s("label",{class:i([C,"w-[120px]"])}," 불량량 "),s("div",null,[v(s("input",{type:"number",class:i([B,"w-2/3"]),disabled:"",style:{"text-align":"right"},"onUpdate:modelValue":e[15]||(e[15]=t=>w.value=t)},null,512),[[y,w.value]])]),s("div",Dt,$(l.comncode_dtnm||"단위"),1)]),s("div",It,[s("label",{class:i([C,"w-[120px]"])}," 합격량 "),s("div",null,[v(s("input",{type:"number",class:i([B,"w-2/3"]),disabled:"",style:{"text-align":"right"},"onUpdate:modelValue":e[16]||(e[16]=t=>M.value=t)},null,512),[[y,M.value]])]),s("div",qt,$(l.comncode_dtnm||"단위"),1)])]),s("div",Ut,[e[33]||(e[33]=s("div",{class:"text-sm w-[95px]"},"불량유형",-1)),(N(!0),I(pe,null,he(O.value,t=>(N(),I("div",{class:"w-1/4 flex items-center",key:t.def_item_id},[s("label",{class:i([C,"w-[180px]"])},$(t.def_item_name),1),v(s("input",{type:"number","onUpdate:modelValue":o=>q[t.def_item_id]=o,class:i([z,"w-2/3"]),style:{"text-align":"right"}},null,8,Ft),[[y,q[t.def_item_id],void 0,{number:!0}]]),s("div",Tt,$(l.comncode_dtnm||"단위"),1)]))),128)),O.value.length==0?(N(),I("div",Rt,[l.prod_name?(N(),I("div",Bt,[s("span",Et,"선택한 자재 '"+$(l.prod_name)+"'에 연결된 불량 항목이 없습니다. 불량 기준을 등록해주세요. ",1)])):(N(),I("div",Ot,[...e[32]||(e[32]=[s("span",{class:"text-sm",style:{color:"#999"}},"불량 항목이 비어 있습니다.",-1)])]))])):_e("",!0)]),s("div",Lt,[s("label",{class:i([C,"w-[85px]"])},"비고 "),v(s("input",{type:"text",class:i(z),"onUpdate:modelValue":e[17]||(e[17]=t=>k.value=t)},null,512),[[y,k.value]])])]),s("div",zt,[s("div",At,[s("p",Kt,"최종결과 : "+$(ye.value||""),1)]),e[38]||(e[38]=s("h3",{class:"text-md mb-2 font-medium"},"검사 기준 항목",-1)),e[39]||(e[39]=s("h4",{class:"mb-1.5 text-md"},"범위 검사",-1)),a(r(A),{value:f.value,dataKey:"insp_item_id",showGridlines:"",size:"small",rows:5,class:"text-sm mb-4"},{empty:u(()=>[...e[35]||(e[35]=[s("div",{class:"text-center"},"추가된 검사대상이 없습니다.",-1)])]),default:u(()=>[a(r(d),{field:"insp_item_name",header:"항목",pt:{columnHeaderContent:"justify-center"},style:{width:"300px"}}),a(r(d),{field:"insp_method",header:"검사방법",pt:{columnHeaderContent:"justify-center"},style:{width:"100px"}},{body:u(t=>[s("div",Zt,[a(r(Ce),{icon:"pi pi-file",text:!0,severity:"secondary",class:"p-button-sm hover:bg-gray-400",style:{width:"20px",height:"15px","text-align":"center",color:"#999"},disabled:!t.data.insp_method||t.data.insp_method==="-",onClick:o=>Oe(t.data)},null,8,["disabled","onClick"])])]),_:1}),a(r(d),{field:"range_stand",header:"범위기준",pt:{columnHeaderContent:"justify-center"},style:{width:"450px"}},{body:u(t=>[s("div",Gt,[v(s("input",{type:"text","onUpdate:modelValue":o=>t.data.min_range=o,class:i([B,"text-right w-[100px]"]),disabled:""},null,8,Yt),[[y,t.data.min_range]]),s("span",Pt,$(t.data.min_label||"단위"),1),e[36]||(e[36]=s("span",{class:"w-[80px] flex justify-center"},"- ",-1)),v(s("input",{type:"text","onUpdate:modelValue":o=>t.data.max_range=o,class:i([B,"text-right"]),disabled:""},null,8,Qt),[[y,t.data.max_range]]),s("span",Jt,$(t.data.max_label||"단위"),1)])]),_:1}),a(r(d),{field:"unit",header:"단위",pt:{columnHeaderContent:"justify-center"},style:{width:"100px"}}),a(r(d),{field:"insp_result_value",header:"측정값 입력",pt:{columnHeaderContent:"justify-center"},style:{width:"250px"}},{body:u(t=>[v(s("input",{type:"text",class:i(z),placeholder:"측정값 입력하세요.","onUpdate:modelValue":o=>t.data.insp_result_value=o,onInput:o=>Fe(t.data),style:{"text-align":"right"}},null,40,Wt),[[y,t.data.insp_result_value]])]),_:1}),a(r(d),{field:"r_value",header:"판정",pt:{columnHeaderContent:"justify-center"},class:"text-center",style:{width:"120px","text-align":"center"}},{body:u(t=>[Y($(t.data.r_value==="P"?"적합":t.data.r_value==="F"?"부적합":""),1)]),_:1})]),_:1},8,["value"]),a(Xe,{visible:ae.value,method:le.value,onClose:Be},null,8,["visible","method"]),e[40]||(e[40]=s("h4",{class:"mb-1.5 text-md"},"관능 검사",-1)),a(r(A),{value:b.value,expandedRows:te.value,"onUpdate:expandedRows":e[18]||(e[18]=t=>te.value=t),dataKey:"insp_item_id",showGridlines:"",scrollable:"",size:"small",class:"text-sm mb-4"},{empty:u(()=>[...e[37]||(e[37]=[s("div",{class:"text-center"},"추가된 검사대상이 없습니다.",-1)])]),expansion:u(t=>[s("div",es,[a(r(A),{value:t.data.details,dataKey:"id",size:"small"},{default:u(()=>[a(r(d),{field:"order",header:"번호",pt:{columnHeaderContent:"justify-center"},style:{width:"120px","text-align":"center"}}),a(r(d),{field:"question_name",header:"질문",pt:{columnHeaderContent:"justify-center"}}),(N(!0),I(pe,null,he(t.data.max_score,o=>(N(),xe(r(d),{key:o,field:`s${o}`,header:String(o),pt:{columnHeaderContent:"justify-center"},style:{width:"60px"}},{body:u(g=>[s("div",ts,[v(s("input",{type:"radio",class:"checkboxStyle",name:`${t.data.insp_item_id}-${g.data.id}`,value:o,"onUpdate:modelValue":H=>g.data.score=H,onChange:H=>Te(t.data)},null,40,ss),[[Qe,g.data.score,void 0,{number:!0}]])])]),_:2},1032,["field","header"]))),128))]),_:2},1032,["value"])])]),default:u(()=>[a(r(d),{expander:"",style:{width:"3rem"}}),a(r(d),{field:"insp_item_name",header:"항목",pt:{columnHeaderContent:"justify-center"},style:{width:"400px"}}),a(r(d),{field:"pass_score",header:"합격기준점수(평균)",pt:{columnHeaderContent:"justify-center"},style:{width:"300px","text-align":"right"}}),a(r(d),{field:"pass_score_spec",header:"합격기준점수 범위",pt:{columnHeaderContent:"justify-center"},style:{width:"300px"}},{body:u(t=>[Y($(L(t.data.pass_score_spec)),1)]),_:1}),a(r(d),{field:"insp_result_value",header:"현재점수",pt:{columnHeaderContent:"justify-center"},style:{width:"300px","text-align":"right"}}),a(r(d),{field:"score_desc",header:"채점기준",pt:{columnHeaderContent:"justify-center"},style:{width:"120px"}},{body:u(t=>[s("div",Xt,[a(r(Ce),{icon:"pi pi-file",text:!0,severity:"secondary",class:"p-button-sm hover:bg-gray-400",style:{width:"20px",height:"15px","text-align":"center",color:"#999"},disabled:!t.data.score_desc||!t.data.score_desc.length,onClick:o=>Ee(t.data)},null,8,["disabled","onClick"])])]),_:1}),a(r(d),{field:"r_value",header:"판정",pt:{columnHeaderContent:"justify-center"},style:{width:"120px","text-align":"center"}},{body:u(t=>[Y($(t.data.r_value==="P"?"적합":t.data.r_value==="F"?"부적합":""),1)]),_:1})]),_:1},8,["value","expandedRows"]),a(et,{visible:oe.value,items:re.value,onClose:Le},null,8,["visible","items"])])])]),_:1})]),_:1}))}}),ys=He(as,[["__scopeId","data-v-61c56521"]]);export{ys as default};
