import{p as _e,r as p,B as te,c as U,d as ve,l,i as c,b as t,u as o,o as H,j as ee,t as C,I as ce,q as pe,h as he,w as m,n as r,v as _,g as we,F as me,J as Je,K as ke}from"./index-CJ3q1JqJ.js";import{_ as Pe}from"./common-BC0Yipj8.js";import{_ as Ce}from"./ComponentCardButton.vue_vue_type_script_setup_true_lang-BzeZFBPb.js";import{_ as We}from"./AdminLayout-C24uwuk1.js";import{s as Q,a as u,b as Ve}from"./index-BK6avQhT.js";/* empty css                   */import{C as Me}from"./component-CQdj2KLS.js";import{_ as je}from"./Modal.vue_vue_type_script_setup_true_lang-By9v9QUL.js";import{a as B}from"./index-ngrFHoWO.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as Xe,a as et}from"./MatInspRubricModal-BlrG3mKp.js";import{k as Se}from"./ko-uxAFNFCj.js";const tt={key:0},at={class:"modal-container"},st=_e({__name:"MatInspTargetSelectModal",props:{visible:{type:Boolean}},emits:["close","checked"],setup(J,{emit:L}){const V=J,n=L,f=()=>{n("close")},b=p([]),w=p([]),N=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit"}),k=M=>{const S=N.formatToParts(new Date(M)),A=S.find(F=>F.type==="year").value,ae=S.find(F=>F.type==="month").value,Z=S.find(F=>F.type==="day").value;return`${A}-${ae}-${Z}`},x=async()=>{try{const{data:M}=await B.get("/api/matInspTarget");b.value=M,w.value=b.value.map(S=>({...S,pur_date:k(S.pur_date)})),console.log("조회결과:",M)}catch(M){console.error("데이터 조회 오류:",M),b.value=[],w.value=[]}};te(()=>V.visible,async M=>{M&&await x()});const $=p(null),z=()=>{n("checked",$.value),n("close")};return(M,S)=>V.visible?(H(),U("div",tt,[l(je,{title:"검사대상",fullScreenBackdrop:!0,"title-align":"left","header-align":"right",width:"900px",onClose:f},{"modal-body":c(()=>[t("div",at,[l(o(Q),{value:w.value,selection:$.value,"onUpdate:selection":S[0]||(S[0]=A=>$.value=A),dataKey:"iis_id",showGridlines:"",scrollable:"",size:"small",class:"text-sm z-[100001]",paginator:"",rows:8},{empty:c(()=>[...S[1]||(S[1]=[t("div",{class:"text-center"},"검색 결과가 없습니다.",-1)])]),default:c(()=>[l(o(u),{header:"",pt:{columnHeaderContent:"justify-center"},selectionMode:"single",showSelectAll:!1,style:{width:"10px"}}),l(o(u),{field:"iis_id",header:"가입고번호",pt:{columnHeaderContent:"justify-center"},style:{"text-align":"center",width:"100px"}}),l(o(u),{field:"pur_name",header:"발주명",pt:{columnHeaderContent:"justify-center"}}),l(o(u),{field:"pur_date",header:"발주일자",pt:{columnHeaderContent:"justify-center"},style:{width:"120px"}}),l(o(u),{field:"mat_name",header:"자재명",pt:{columnHeaderContent:"justify-center"}}),l(o(u),{field:"mat_spec",header:"규격",pt:{columnHeaderContent:"justify-center"}}),l(o(u),{field:"mat_unit",header:"단위",pt:{columnHeaderContent:"justify-center"}}),l(o(u),{field:"pur_qty",header:"발주량",pt:{columnHeaderContent:"justify-center"},style:{"text-align":"right"}})]),_:1},8,["value","selection"])]),t("div",{class:"flex justify-center mt-3"},[t("button",{class:"btn-common btn-white",onClick:z},"확인")])]),_:1})])):ve("",!0)}}),nt=ye(st,[["__scopeId","data-v-bddbc9da"]]),lt={key:0},rt={class:"modal-container"},it=_e({__name:"MatInspSearchModal",props:{visible:{type:Boolean},rows:{}},emits:["close","checked"],setup(J,{emit:L}){const V=J,n=L,f=()=>{n("close")},b=p(null),w=()=>{b.value&&n("checked",b.value),n("close")};function N(k){const x=k instanceof Date?k:new Date(k),$=x.getFullYear(),z=String(x.getMonth()+1).padStart(2,"0"),M=String(x.getDate()).padStart(2,"0");return`${$}-${z}-${M}`}return te(()=>V.visible,k=>{k&&(b.value=null)}),(k,x)=>V.visible?(H(),U("div",lt,[l(je,{title:"조회",fullScreenBackdrop:!0,"title-align":"left","header-align":"right",width:"800px",onClose:f},{"modal-body":c(()=>[t("div",rt,[l(o(Q),{value:V.rows,selection:b.value,"onUpdate:selection":x[0]||(x[0]=$=>b.value=$),dataKey:"insp_id",showGridlines:"",scrollable:"",size:"small",class:"text-sm z-[100001]",paginator:"",rows:8},{empty:c(()=>[...x[1]||(x[1]=[t("div",{class:"text-center"},"검색 결과가 없습니다.",-1)])]),default:c(()=>[l(o(u),{header:"",pt:{columnHeaderContent:"justify-center"},selectionMode:"single",showSelectAll:!1,style:{width:"10px"}}),l(o(u),{field:"insp_name",header:"검사명",pt:{columnHeaderContent:"justify-center"}}),l(o(u),{field:"insp_date",header:"검사일시",pt:{columnHeaderContent:"justify-center"}},{body:c($=>[ee(C(N($.data.insp_date)),1)]),_:1}),l(o(u),{field:"mat_name",header:"자재명",pt:{columnHeaderContent:"justify-center"},style:{width:"120px"}}),l(o(u),{field:"comncode_dtnm",header:"품목구분",pt:{columnHeaderContent:"justify-center"}}),l(o(u),{field:"bcnc_name",header:"거래처",pt:{columnHeaderContent:"justify-center"}})]),_:1},8,["value","selection"])]),t("div",{class:"flex justify-center mt-3"},[t("button",{class:"btn-common btn-white",onClick:w},"확인")])]),_:1})])):ve("",!0)}}),ot=ye(it,[["__scopeId","data-v-695707e5"]]),dt={class:"flex gap-4"},ut={class:"w-1/4"},ct={class:"flex items-center gap-2"},pt={class:"relative"},mt={class:"relative"},_t={class:"flex justify-end"},vt={class:"h-[420px] overflow-auto"},yt={class:"rounded-lg border border-gray-200 shadow-sm p-4 mb-2"},ft={class:"w-full flex items-center mb-2"},bt={class:"flex flex-wrap justify-between gap-2"},gt={class:"w-1/5 flex items-center relative"},xt={class:"w-1/5 flex items-center relative"},ht={class:"w-1/5 flex items-center relative"},wt={class:"w-1/5 flex items-center relative"},kt={class:"w-1/5 flex items-center relative"},Ct={class:"w-1/5 flex items-center relative"},Vt={class:"w-1/5 flex items-center relative"},Mt={class:"w-1/5 flex items-center relative"},St={class:"w-1/5 flex items-center relative"},jt={class:"w-1/5 flex items-center relative"},Ht={class:"w-1/5 flex items-center"},$t={class:"w-1/5 flex items-center"},It={class:"rounded-lg border border-gray-200 p-4 shadow-sm mb-2"},Nt={class:"flex flex-wrap mb-2"},Dt={class:"w-1/4 flex items-center"},qt={class:"relative"},Ut={class:"text-sm w-[100px] ml-2"},Ft={class:"w-1/4 flex items-center"},Tt={class:"text-sm w-[100px] ml-2"},Rt={class:"w-1/4 flex items-center"},Ot={class:"text-sm w-[100px] ml-2"},Bt={class:"w-1/4 flex items-center"},Kt={class:"text-sm w-[100px] ml-2"},Et={class:"flex flex-wrap mb-2"},Lt=["onUpdate:modelValue"],zt={class:"text-sm w-[100px] ml-2"},At={key:0},Zt={key:0},Gt={key:1},Yt={class:"text-sm",style:{color:"#999"}},Qt={class:"w-full flex"},Jt={class:"rounded-lg border border-gray-200 p-4 shadow-sm"},Pt={class:"w-[30%] flex justify-center items-center m-1.5 rounded-md float-right",style:{border:"1px solid #ccc",padding:"4px"}},Wt={class:"text-2xl font-bold"},Xt={class:"flex justify-center"},ea={class:"flex gap-2 w-full items-center"},ta=["onUpdate:modelValue"],aa={class:"w-[100px]"},sa=["onUpdate:modelValue"],na={class:"w-[100px]"},la=["onUpdate:modelValue","onInput"],ra={class:"flex justify-center"},ia={class:"p-4"},oa={class:"flex justify-center"},da=["name","value","onUpdate:modelValue","onChange"],ua="dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-950 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",Y="dark:bg-dark-900 h-7 w-full rounded-sm border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-950 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",I="dark:bg-dark-900 h-7 w-full rounded-sm border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-950 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",E="dark:bg-dark-900 h-7 w-full rounded-sm border border-gray-300 bg-gray-100 px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30",y="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400",ca=_e({__name:"MatInsManage",setup(J){const L=p("자재입고검사 관리"),V=p("이한솔"),n=ce({iis_id:"",pur_code:"",pur_name:"",pur_date:"",bcnc_name:"",mat_code:"",mat_name:"",mat_spec:"",mat_unit:"",pur_qty:0,receipt_qty:0}),f=p(0),b=p(0),w=p(0),N=p(""),k=p(""),x=new Date,$=x.getFullYear(),z=String(x.getMonth()+1).padStart(2,"0"),M=String(x.getDate()).padStart(2,"0"),S=String(x.getHours()).padStart(2,"0"),A=String(x.getMinutes()).padStart(2,"0"),ae=String(x.getSeconds()).padStart(2,"0"),Z=`${$}-${z}-${M} ${S}:${A}:${ae}`,F=p(null),He=async s=>{n.iis_id=String(s.iis_id),n.pur_code=s.pur_code,n.pur_name=s.pur_name,n.pur_date=s.pur_date,n.bcnc_name=s.bcnc_name,n.mat_code=s.mat_code,n.mat_name=s.mat_name,n.mat_spec=s.mat_spec,n.mat_unit=s.mat_unit,n.pur_qty=s.pur_qty,n.receipt_qty=s.receipt_qty,P.value=!1,await Ne(s.mat_code),R.value=null,X.value="create"},P=p(!1),v=()=>{P.value=!0},$e=()=>{P.value=!1},Ie=()=>{f.value>n.receipt_qty&&(alert("검사량은 입고량을 초과할 수 없습니다."),f.value=n.receipt_qty)};te([f,b],()=>{w.value=f.value-b.value});const T=ce({});te(()=>Object.values(T),s=>{const e=s.reduce((a,i)=>a+(i||0),0);b.value=e});const K=p([]),se=p([]),fe=s=>{try{return s?JSON.parse(s):[]}catch{return[]}},Ne=async s=>{try{const{data:e}=await B.get(`/api/matInspQcMasternNG/${s}`);if(!(e!=null&&e.ok))throw new Error("조회 실패");K.value=e.ng??[],se.value=(e.qc??[]).map(a=>({...a,sens_questions:fe(a.sens_questions),score_desc:fe(a.score_desc)})),Ue(),console.log("불량 및 품질기준관리 조회결과:",e)}catch(e){console.error("데이터 조회 오류:",e),K.value=[],se.value=[],q.value=[],D.value=[]}},D=p([]),q=p([]),G=s=>{switch((s||"").toLowerCase()){case"r1":return"이상";case"r2":return"초과";case"r3":return"이하";case"r4":return"미만";default:return""}},ne=s=>s==null||s===""?null:Number(s),be=s=>Array.isArray(s)?s:s?JSON.parse(s):[],De=s=>{const e=ne(s.insp_result_value);if(e===null){s.r_value="";return}const a=ne(s.min_range),i=ne(s.max_range);let g=!0;a!==null&&(g=s.min_label==="이상"?e>=a:s.min_label==="초과"?e>a:!0);let j=!0;i!==null&&(j=s.max_label==="이하"?e<=i:s.max_label==="미만"?e<i:!0),s.r_value=g&&j?"P":"F"},qe=s=>{const e=s.details.map(O=>O.score).filter(O=>typeof O=="number");if(!e.length){s.insp_result_value=0,s.r_value="";return}const a=e.reduce((O,d)=>O+d,0)/e.length,i=s.pass_score,j=(s.pass_score_spec||"r1").toLowerCase()==="r2"?a>i:a>=i;s.insp_result_value=Number(a.toFixed(2)),s.r_value=j?"P":"F"},Ue=()=>{const s=[],e=[];(se.value||[]).forEach(a=>{if(a.insp_type==="R")s.push({insp_item_id:a.insp_item_id,insp_item_name:a.insp_item_name,min_range:a.min_range??"",min_label:G(a.min_range_spec),max_range:a.max_range??"",max_label:G(a.max_range_spec),unit:a.unit??"",insp_method:a.insp_method??null,file_name:a.file_name??null,insp_result_value:0,r_value:""});else if(a.insp_type==="S"){const i=be(a.sens_questions).map((g,j)=>({id:`${a.insp_item_id}-${g.order??j+1}`,order:g.order??j+1,question_name:g.name??g.question??g.question_name??"",score:void 0}));e.push({insp_item_id:a.insp_item_id,insp_item_name:a.insp_item_name,pass_score:Number(a.pass_score??0),pass_score_spec:(a.pass_score_spec??"").toLowerCase(),score_desc:be(a.score_desc),max_score:Number(a.max_score??5),insp_result_value:0,r_value:"",details:i})}}),D.value=s,q.value=e},ge=pe(()=>{const s=D.value.every(a=>a.r_value==="P"),e=q.value.every(a=>a.r_value==="P");return D.value.length===0&&q.value.length===0?"":s&&e?"합격":"불합격"}),le=p(!1),re=p(null),Fe=async s=>{re.value=(s==null?void 0:s.insp_method)??null,await ke(),le.value=!0},Te=()=>{le.value=!1,re.value=null},ie=p(!1),oe=p(null),Re=s=>{oe.value=s.score_desc,ie.value=!0},Oe=()=>{ie.value=!1,oe.value=null},Be=pe(()=>({dateFormat:"Y-m-d",altInput:!1,wrap:!0,maxDate:h.end_date||"today",locale:Se.Korean})),Ke=pe(()=>({dateFormat:"Y-m-d",altInput:!1,wrap:!0,minDate:h.start_date||void 0,maxDate:"today",locale:Se.Korean})),h=ce({insp_name_word:"",start_date:"",end_date:""}),Ee=()=>{h.insp_name_word="",h.start_date="",h.end_date="",de.value=[]},W=p(!1),de=p([]),Le=async()=>{try{const{data:s}=await B.post("/api/matInspSearch",{insp_name_word:h.insp_name_word||void 0,start_date:h.start_date||void 0,end_date:h.end_date||void 0});de.value=Array.isArray(s)?s:(s==null?void 0:s.data)||[],await ke(),console.log("검색기능 : ",s),W.value=!0,h.insp_name_word="",h.start_date="",h.end_date=""}catch(s){alert("검색에 실패했습니다."),console.error(s)}};async function ze(s){W.value=!1,await B.get(`/api/matInspDetail/${s.insp_id}`).then(({data:e})=>{if(!(e!=null&&e.ok)){alert((e==null?void 0:e.message)||"상세 조회 실패");return}const{header:a,results:i,ngs:g}=e;N.value=a.insp_name||"",V.value=a.emp_id||V.value,n.iis_id=String(a.iis_id||""),n.pur_code=a.pur_code||"",n.pur_name=a.pur_name||"",n.pur_date=a.pur_date||"",n.bcnc_name=a.bcnc_name||"",n.mat_code=a.mat_code||"",n.mat_name=a.mat_name||"",n.mat_spec=a.mat_spec||"",n.mat_unit=a.mat_unit||"",n.pur_qty=Number(a.pur_qty||0),n.receipt_qty=Number(a.receipt_qty||0),f.value=Number(a.insp_qty||0),b.value=Number(a.fail_qty||0),w.value=Number(a.pass_qty||0),k.value=a.remark||"";const j=[],O=[];for(const d of i||[])d.insp_type==="R"?j.push({insp_item_id:d.insp_item_id,insp_item_name:d.insp_item_name,min_range:d.min_range??"",min_label:G(d.min_range_spec),max_range:d.max_range??"",max_label:G(d.max_range_spec),unit:d.unit??"",insp_method:d.insp_method??null,file_name:d.file_name??null,insp_result_value:Number(d.insp_result_value??0),r_value:d.r_value||""}):d.insp_type==="S"&&O.push({insp_item_id:d.insp_item_id,insp_item_name:d.insp_item_name,pass_score:Number(d.pass_score??0),pass_score_spec:(d.pass_score_spec??"").toLowerCase(),score_desc:[],max_score:Number(d.max_score??5),insp_result_value:Number(d.insp_result_value??0),r_value:d.r_value||"",details:[]});D.value=j,q.value=O,K.value=(g||[]).map(d=>({def_item_id:d.def_item_id,def_item_name:d.def_item_name})),Object.keys(T).forEach(d=>delete T[d]);for(const d of g||[])T[d.def_item_id]=Number(d.qty||0)}).catch(e=>{console.error(e),alert("상세 조회 중 오류")}),R.value=s.insp_id,X.value="edit"}const X=p("create"),R=p(null),xe=()=>{const s=ge.value==="합격"?"P":"F",e=[];for(const i of D.value)e.push({insp_result_value:Number(i.insp_result_value??0),r_value:i.r_value||"",insp_item_id:i.insp_item_id});for(const i of q.value)e.push({insp_result_value:Number(i.insp_result_value??0),r_value:i.r_value||"",insp_item_id:i.insp_item_id});const a=Object.entries(T).filter(([,i])=>Number(i)>0).map(([i,g])=>({def_item_id:i,qty:Number(g)}));return{insp_name:N.value,insp_date:Z,insp_qty:Number(f.value||0),pass_qty:Number(w.value||0),fail_qty:Number(b.value||0),remark:k.value||"",t_result:s,emp_id:V.value||"EMP-20250616-0004",iis_id:Number(n.iis_id),results:e,ngs:a}},Ae=s=>s!=null&&s!==""&&!Number.isNaN(Number(s)),Ze=()=>{var s;if(!((s=N.value)!=null&&s.trim()))return alert("검사명을 입력해주세요."),!1;if(!n.iis_id)return alert("가입고번호를 선택해주세요."),!1;if(!f.value||f.value<=0)return alert("검사량을 입력해주세요."),!1;if(f.value>n.receipt_qty)return alert("검사량은 입고량을 초과할 수 없습니다."),!1;if(w.value<0)return alert("합격량은 0보다 작을 수 없습니다."),!1;if(D.value.length>0){const e=D.value.filter(a=>!Ae(a.insp_result_value));if(e.length>0){const a=e[0];return alert(`범위 검사 '${a.insp_item_name}'에 측정값을 입력해주세요.`),!1}}if(q.value.length>0)for(const e of q.value){if(!e.details||e.details.length===0)continue;const a=e.details.find(i=>typeof i.score!="number");if(a)return alert(`관능 검사 '${e.insp_item_name}'의 '${a.order}. ${a.question_name}' 점수를 선택해주세요.`),!1}return!0},Ge=async()=>{try{if(!Ze())return;const s=xe(),{data:e}=await B.post("/api/matInsp",s);e!=null&&e.ok?(alert(`등록되었습니다.
검사ID: ${e.insp_id??""}`),ue()):alert((e==null?void 0:e.message)||"등록 실패")}catch(s){console.error("[FE] 등록 오류:",s),alert("서버 오류가 발생했습니다.")}},Ye=async()=>{try{if(!R.value)return alert("수정할 검사ID가 없습니다.");if(w.value<0)return alert("합격량은 0보다 작을 수 없습니다.");if(!n.iis_id)return alert("가입고번호를 선택해주세요.");if(!f.value||f.value<=0)return alert("검사량을 입력해주세요.");const s=xe(),{data:e}=await B.put(`/api/matInsp/${R.value}`,s);e!=null&&e.ok?alert(`수정되었습니다.
검사ID: ${R.value}`):alert((e==null?void 0:e.message)||"수정 실패")}catch(s){console.error("[FE] 수정 오류:",s),alert("서버 오류가 발생했습니다.")}},Qe=async()=>{try{if(!R.value)return alert("삭제할 검사ID가 없습니다.");if(!confirm("정말 삭제하시겠습니까?"))return;const{data:s}=await B.delete(`/api/matInsp/${R.value}`);s!=null&&s.ok?(alert("삭제되었습니다."),ue()):alert((s==null?void 0:s.message)||"삭제 실패")}catch(s){console.error("[FE] 삭제 오류:",s),alert("서버 오류가 발생했습니다.")}},ue=()=>{N.value="",V.value="이한솔",k.value="",Object.assign(n,{iis_id:"",pur_code:"",pur_name:"",pur_date:"",bcnc_name:"",mat_code:"",mat_name:"",mat_spec:"",mat_unit:"",pur_qty:0,receipt_qty:0}),f.value=0,b.value=0,w.value=0,K.value=[],Object.keys(T).forEach(s=>delete T[s]),D.value=[],q.value=[],F.value=null,R.value=null,X.value="create"};return(s,e)=>(H(),he(We,null,{default:c(()=>[l(Pe,{pageTitle:L.value},null,8,["pageTitle"]),l(Ce,{title:"조회",className:"shadow-sm",class:"mb-2"},{"header-right":c(()=>[t("div",{class:"flex justify-end"},[t("button",{class:"btn-common btn-white",onClick:Ee},"초기화"),t("button",{class:"btn-common btn-color",onClick:Le},"조회")])]),"body-content":c(()=>[t("div",dt,[t("div",ut,[t("label",{class:r(y)}," 검사명 "),m(t("input",{type:"text",class:r(ua),"onUpdate:modelValue":e[0]||(e[0]=a=>h.insp_name_word=a)},null,512),[[_,h.insp_name_word]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," 검사일시 ",-1)),t("div",ct,[t("div",pt,[l(o(Me),{modelValue:h.start_date,"onUpdate:modelValue":e[1]||(e[1]=a=>h.start_date=a),config:Be.value,class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 pl-4 pr-11 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",placeholder:" "},null,8,["modelValue","config"]),e[23]||(e[23]=t("span",{class:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400"},[t("svg",{class:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.66659 1.5415C7.0808 1.5415 7.41658 1.87729 7.41658 2.2915V2.99984H12.5833V2.2915C12.5833 1.87729 12.919 1.5415 13.3333 1.5415C13.7475 1.5415 14.0833 1.87729 14.0833 2.2915V2.99984L15.4166 2.99984C16.5212 2.99984 17.4166 3.89527 17.4166 4.99984V7.49984V15.8332C17.4166 16.9377 16.5212 17.8332 15.4166 17.8332H4.58325C3.47868 17.8332 2.58325 16.9377 2.58325 15.8332V7.49984V4.99984C2.58325 3.89527 3.47868 2.99984 4.58325 2.99984L5.91659 2.99984V2.2915C5.91659 1.87729 6.25237 1.5415 6.66659 1.5415ZM6.66659 4.49984H4.58325C4.30711 4.49984 4.08325 4.7237 4.08325 4.99984V6.74984H15.9166V4.99984C15.9166 4.7237 15.6927 4.49984 15.4166 4.49984H13.3333H6.66659ZM15.9166 8.24984H4.08325V15.8332C4.08325 16.1093 4.30711 16.3332 4.58325 16.3332H15.4166C15.6927 16.3332 15.9166 16.1093 15.9166 15.8332V8.24984Z",fill:""})])],-1))]),e[25]||(e[25]=t("div",null,"-",-1)),t("div",mt,[l(o(Me),{modelValue:h.end_date,"onUpdate:modelValue":e[2]||(e[2]=a=>h.end_date=a),config:Ke.value,class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 pl-4 pr-11 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",placeholder:" "},null,8,["modelValue","config"]),e[24]||(e[24]=t("span",{class:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400"},[t("svg",{class:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.66659 1.5415C7.0808 1.5415 7.41658 1.87729 7.41658 2.2915V2.99984H12.5833V2.2915C12.5833 1.87729 12.919 1.5415 13.3333 1.5415C13.7475 1.5415 14.0833 1.87729 14.0833 2.2915V2.99984L15.4166 2.99984C16.5212 2.99984 17.4166 3.89527 17.4166 4.99984V7.49984V15.8332C17.4166 16.9377 16.5212 17.8332 15.4166 17.8332H4.58325C3.47868 17.8332 2.58325 16.9377 2.58325 15.8332V7.49984V4.99984C2.58325 3.89527 3.47868 2.99984 4.58325 2.99984L5.91659 2.99984V2.2915C5.91659 1.87729 6.25237 1.5415 6.66659 1.5415ZM6.66659 4.49984H4.58325C4.30711 4.49984 4.08325 4.7237 4.08325 4.99984V6.74984H15.9166V4.99984C15.9166 4.7237 15.6927 4.49984 15.4166 4.49984H13.3333H6.66659ZM15.9166 8.24984H4.08325V15.8332C4.08325 16.1093 4.30711 16.3332 4.58325 16.3332H15.4166C15.6927 16.3332 15.9166 16.1093 15.9166 15.8332V8.24984Z",fill:""})])],-1))])])])])]),_:1}),l(ot,{visible:W.value,rows:de.value,onClose:e[3]||(e[3]=a=>W.value=!1),onChecked:ze},null,8,["visible","rows"]),l(Ce,{title:"등록",className:"shadow-sm"},{"header-right":c(()=>[t("div",_t,[t("button",{class:"btn-common btn-white",onClick:ue},"초기화"),X.value==="create"?(H(),U("button",{key:0,class:"btn-common btn-color",onClick:Ge},"등록")):(H(),U(me,{key:1},[e[27]||(e[27]=t("button",{class:"btn-common btn-color"},"PDF",-1)),t("button",{class:"btn-common btn-color",onClick:Ye},"수정"),t("button",{class:"btn-common btn-white",onClick:Qe},"삭제")],64))])]),"body-content":c(()=>[t("div",vt,[t("div",yt,[e[38]||(e[38]=t("h3",{class:"text-md mb-2 font-medium"},"기본정보",-1)),t("div",ft,[t("label",{class:r([y,"w-[86px]"])}," 검사명 "),m(t("input",{type:"text",class:r([Y,"w-2/3"]),placeholder:"검사명을 입력하세요.","onUpdate:modelValue":e[4]||(e[4]=a=>N.value=a)},null,512),[[_,N.value]])]),t("div",bt,[t("div",gt,[t("label",{class:r([y,"w-[120px]"])}," 가입고번호 "),m(t("input",{type:"text",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[5]||(e[5]=a=>n.iis_id=a)},null,512),[[_,n.iis_id]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[28]||(e[28]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",xt,[t("label",{class:r([y,"w-[120px]"])}," 발주번호 "),m(t("input",{type:"text",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[6]||(e[6]=a=>n.pur_code=a)},null,512),[[_,n.pur_code]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[29]||(e[29]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",ht,[t("label",{class:r([y,"w-[120px]"])}," 발주명 "),m(t("input",{type:"text",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[7]||(e[7]=a=>n.pur_name=a)},null,512),[[_,n.pur_name]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[30]||(e[30]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",wt,[t("label",{class:r([y,"w-[120px]"])}," 발주일자 "),m(t("input",{type:"text",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[8]||(e[8]=a=>n.pur_date=a)},null,512),[[_,n.pur_date]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[31]||(e[31]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",kt,[t("label",{class:r([y,"w-[120px]"])}," 거래처 "),m(t("input",{type:"text",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[9]||(e[9]=a=>n.bcnc_name=a)},null,512),[[_,n.bcnc_name]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[32]||(e[32]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",Ct,[t("label",{class:r([y,"w-[120px]"])}," 자재코드 "),m(t("input",{type:"text",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[10]||(e[10]=a=>n.mat_code=a)},null,512),[[_,n.mat_code]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[33]||(e[33]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",Vt,[t("label",{class:r([y,"w-[120px]"])}," 자재명 "),m(t("input",{type:"text",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[11]||(e[11]=a=>n.mat_name=a)},null,512),[[_,n.mat_name]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[34]||(e[34]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",Mt,[t("label",{class:r([y,"w-[120px]"])}," 규격 "),m(t("input",{type:"text",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[12]||(e[12]=a=>n.mat_spec=a)},null,512),[[_,n.mat_spec]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[35]||(e[35]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",St,[t("label",{class:r([y,"w-[120px]"])}," 단위 "),m(t("input",{type:"text",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[13]||(e[13]=a=>n.mat_unit=a)},null,512),[[_,n.mat_unit]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[36]||(e[36]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",jt,[t("label",{class:r([y,"w-[120px]"])}," 발주수량 "),m(t("input",{type:"number",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[14]||(e[14]=a=>n.pur_qty=a),style:{"text-align":"right","padding-right":"20px"}},null,512),[[_,n.pur_qty]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[37]||(e[37]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",Ht,[t("label",{class:r([y,"w-[120px]"])}," 검사자 "),m(t("input",{type:"text",class:r([E,"w-2/3"]),"onUpdate:modelValue":e[15]||(e[15]=a=>V.value=a),disabled:""},null,512),[[_,V.value]])]),t("div",$t,[t("label",{class:r([y,"w-[120px]"])}," 검사일시 "),m(t("input",{type:"text",class:r([E,"w-2/3"]),"onUpdate:modelValue":e[16]||(e[16]=a=>Z=a),disabled:""},null,512),[[_,Z]])])]),l(nt,{visible:P.value,onClose:$e,onChecked:He},null,8,["visible"])]),t("div",It,[e[42]||(e[42]=t("h3",{class:"text-md mb-2 font-medium"},"수량입력",-1)),t("div",Nt,[t("div",Dt,[t("label",{class:r([y,"w-[120px]"])},"입고량 "),t("div",qt,[m(t("input",{type:"number",class:r([I,"w-2/3 cursor-pointer hover:bg-gray-100 duration-300"]),readonly:"",onClick:v,"onUpdate:modelValue":e[17]||(e[17]=a=>n.receipt_qty=a),style:{"text-align":"right","padding-right":"20px"}},null,512),[[_,n.receipt_qty]]),t("button",{type:"button",class:"absolute inset-y-0 right-2 flex items-center text-gray-400",onClick:v},[...e[39]||(e[39]=[t("i",{class:"pi pi-search"},null,-1)])])]),t("div",Ut,C(n.mat_unit||"단위"),1)]),t("div",Ft,[t("label",{class:r([y,"w-[120px]"])}," 검사량 "),t("div",null,[m(t("input",{type:"number",class:r([Y,"w-2/3"]),placeholder:"검사량을 입력하세요.","onUpdate:modelValue":e[18]||(e[18]=a=>f.value=a),style:{"text-align":"right"},onInput:Ie},null,544),[[_,f.value]])]),t("div",Tt,C(n.mat_unit||"단위"),1)]),t("div",Rt,[t("label",{class:r([y,"w-[120px]"])}," 불량량 "),t("div",null,[m(t("input",{type:"number",class:r([E,"w-2/3"]),disabled:"",style:{"text-align":"right"},"onUpdate:modelValue":e[19]||(e[19]=a=>b.value=a)},null,512),[[_,b.value]])]),t("div",Ot,C(n.mat_unit||"단위"),1)]),t("div",Bt,[t("label",{class:r([y,"w-[120px]"])}," 합격량 "),t("div",null,[m(t("input",{type:"number",class:r([E,"w-2/3"]),disabled:"",style:{"text-align":"right"},"onUpdate:modelValue":e[20]||(e[20]=a=>w.value=a)},null,512),[[_,w.value]])]),t("div",Kt,C(n.mat_unit||"단위"),1)])]),t("div",Et,[e[41]||(e[41]=t("div",{class:"text-sm w-[95px]"},"불량유형",-1)),(H(!0),U(me,null,we(K.value,a=>(H(),U("div",{class:"w-1/4 flex items-center",key:a.def_item_id},[t("label",{class:r([y,"w-[180px]"])},C(a.def_item_name),1),m(t("input",{type:"number","onUpdate:modelValue":i=>T[a.def_item_id]=i,class:r([Y,"w-2/3"]),style:{"text-align":"right"}},null,8,Lt),[[_,T[a.def_item_id],void 0,{number:!0}]]),t("div",zt,C(n.mat_unit||"단위"),1)]))),128)),K.value.length==0?(H(),U("div",At,[n.mat_name?(H(),U("div",Gt,[t("span",Yt,"선택한 자재 '"+C(n.mat_name)+"'에 연결된 불량 항목이 없습니다. 불량 기준을 등록해주세요. ",1)])):(H(),U("div",Zt,[...e[40]||(e[40]=[t("span",{class:"text-sm",style:{color:"#999"}},"불량 항목이 비어 있습니다.",-1)])]))])):ve("",!0)]),t("div",Qt,[t("label",{class:r([y,"w-[85px]"])},"비고 "),m(t("input",{type:"text",class:r(Y),"onUpdate:modelValue":e[21]||(e[21]=a=>k.value=a)},null,512),[[_,k.value]])])]),t("div",Jt,[t("div",Pt,[t("p",Wt,"최종결과 : "+C(ge.value),1)]),e[46]||(e[46]=t("h3",{class:"text-md mb-2 font-medium"},"검사 기준 항목",-1)),e[47]||(e[47]=t("h4",{class:"mb-1.5 text-md"},"범위 검사",-1)),l(o(Q),{value:D.value,dataKey:"insp_item_id",showGridlines:"",size:"small",rows:5,class:"text-sm mb-4"},{empty:c(()=>[...e[43]||(e[43]=[t("div",{class:"text-center"},"추가된 검사대상이 없습니다.",-1)])]),default:c(()=>[l(o(u),{field:"insp_item_name",header:"항목",pt:{columnHeaderContent:"justify-center"},style:{width:"300px"}}),l(o(u),{field:"insp_method",header:"검사방법",pt:{columnHeaderContent:"justify-center"},style:{width:"100px"}},{body:c(a=>[t("div",Xt,[l(o(Ve),{icon:"pi pi-file",text:!0,severity:"secondary",class:"p-button-sm hover:bg-gray-400",style:{width:"20px",height:"15px","text-align":"center",color:"#999"},disabled:!a.data.insp_method||a.data.insp_method==="-",onClick:i=>Fe(a.data)},null,8,["disabled","onClick"])])]),_:1}),l(o(u),{field:"range_stand",header:"범위기준",pt:{columnHeaderContent:"justify-center"},style:{width:"450px"}},{body:c(a=>[t("div",ea,[m(t("input",{type:"text","onUpdate:modelValue":i=>a.data.min_range=i,class:r([E,"text-right w-[100px]"]),disabled:""},null,8,ta),[[_,a.data.min_range]]),t("span",aa,C(a.data.min_label||"단위"),1),e[44]||(e[44]=t("span",{class:"w-[80px] flex justify-center"},"- ",-1)),m(t("input",{type:"text","onUpdate:modelValue":i=>a.data.max_range=i,class:r([E,"text-right"]),disabled:""},null,8,sa),[[_,a.data.max_range]]),t("span",na,C(a.data.max_label||"단위"),1)])]),_:1}),l(o(u),{field:"unit",header:"단위",pt:{columnHeaderContent:"justify-center"},style:{width:"100px"}}),l(o(u),{field:"insp_result_value",header:"측정값 입력",pt:{columnHeaderContent:"justify-center"},style:{width:"250px","text-align":"right"}},{body:c(a=>[m(t("input",{type:"text",class:r(Y),placeholder:"측정값 입력하세요.","onUpdate:modelValue":i=>a.data.insp_result_value=i,onInput:i=>De(a.data),style:{"text-align":"right"}},null,40,la),[[_,a.data.insp_result_value]])]),_:1}),l(o(u),{field:"r_value",header:"판정",pt:{columnHeaderContent:"justify-center"},class:"text-center",style:{width:"120px","text-align":"center"}},{body:c(a=>[ee(C(a.data.r_value==="P"?"적합":a.data.r_value==="F"?"부적합":""),1)]),_:1})]),_:1},8,["value"]),l(Xe,{visible:le.value,method:re.value,onClose:Te},null,8,["visible","method"]),e[48]||(e[48]=t("h4",{class:"mb-1.5 text-md"},"관능 검사",-1)),l(o(Q),{expandedRows:F.value,"onUpdate:expandedRows":e[22]||(e[22]=a=>F.value=a),value:q.value,dataKey:"insp_item_id",showGridlines:"",scrollable:"",size:"small",class:"text-sm mb-4"},{empty:c(()=>[...e[45]||(e[45]=[t("div",{class:"text-center"},"추가된 검사대상이 없습니다.",-1)])]),expansion:c(a=>[t("div",ia,[l(o(Q),{value:a.data.details,dataKey:"id",size:"small"},{default:c(()=>[l(o(u),{field:"order",header:"번호",pt:{columnHeaderContent:"justify-center"},style:{width:"120px","text-align":"center"}}),l(o(u),{field:"question_name",header:"질문",pt:{columnHeaderContent:"justify-center"}}),(H(!0),U(me,null,we(a.data.max_score,i=>(H(),he(o(u),{key:i,field:`s${i}`,header:String(i),pt:{columnHeaderContent:"justify-center"},style:{width:"60px"}},{body:c(g=>[t("div",oa,[m(t("input",{type:"radio",class:"checkboxStyle",name:`${a.data.insp_item_id}-${g.data.id}`,value:i,"onUpdate:modelValue":j=>g.data.score=j,onChange:j=>qe(a.data)},null,40,da),[[Je,g.data.score,void 0,{number:!0}]])])]),_:2},1032,["field","header"]))),128))]),_:2},1032,["value"])])]),default:c(()=>[l(o(u),{expander:"",style:{width:"3rem"}}),l(o(u),{field:"insp_item_name",header:"항목",pt:{columnHeaderContent:"justify-center"},style:{width:"400px"}}),l(o(u),{field:"pass_score",header:"합격기준점수(평균)",pt:{columnHeaderContent:"justify-center"},style:{width:"300px","text-align":"right"}}),l(o(u),{field:"pass_score_spec",header:"합격기준점수 범위",pt:{columnHeaderContent:"justify-center"},style:{width:"300px"}},{body:c(a=>[ee(C(G(a.data.pass_score_spec)),1)]),_:1}),l(o(u),{field:"insp_result_value",header:"현재점수",pt:{columnHeaderContent:"justify-center"},style:{width:"300px","text-align":"right"}}),l(o(u),{field:"score_desc",header:"채점기준",pt:{columnHeaderContent:"justify-center"},style:{width:"120px"}},{body:c(a=>[t("div",ra,[l(o(Ve),{icon:"pi pi-file",text:!0,severity:"secondary",class:"p-button-sm hover:bg-gray-400",style:{width:"20px",height:"15px","text-align":"center",color:"#999"},disabled:!a.data.score_desc||!a.data.score_desc.length,onClick:i=>Re(a.data)},null,8,["disabled","onClick"])])]),_:1}),l(o(u),{field:"r_value",header:"판정",pt:{columnHeaderContent:"justify-center"},style:{width:"120px","text-align":"center"}},{body:c(a=>[ee(C(a.data.r_value==="P"?"적합":a.data.r_value==="F"?"부적합":""),1)]),_:1})]),_:1},8,["expandedRows","value"]),l(et,{visible:ie.value,items:oe.value,onClose:Oe},null,8,["visible","items"])])])]),_:1})]),_:1}))}}),Ca=ye(ca,[["__scopeId","data-v-beb35576"]]);export{Ca as default};
